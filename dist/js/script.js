"use strict";var _createClass=function(){function e(e,t){for(var i in t){var n=t[i];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},addOnloadHandler=void 0,corsRequest=void 0,getElementsByClassName=void 0,main=void 0,setIframeHeight=void 0,setInnerText=void 0,template=void 0,BASE_URL="https://service-stg.visasq.com/",TOPICS_PATH="topics",USERS_PATH="users",API_PATH="api/v3/",ItemRepository=function(){function e(){_classCallCheck(this,e),this.itemContainer={}}return _createClass(e,{load:{value:function(e,t,i){var n=this;return t in this.itemContainer?void i(this.itemContainer[t]):corsRequest(""+BASE_URL+API_PATH+USERS_PATH+"/"+e,function(s){return n.itemContainer[t]=[],n.itemContainer[t].push(new User(s.result)),corsRequest(""+BASE_URL+API_PATH+USERS_PATH+"/"+e+"/"+TOPICS_PATH,function(e){return e.forEach(function(e){n.itemContainer[t].push(new Topic(e))}),i(n.itemContainer[t])})})}}}),e}(),Topic=function e(t){_classCallCheck(this,e),this.__class__="Topic";var i=t.id;this.title=t.title,this.description=t.description,this.blankPrice=t.blank_price,this.price=t.price,this.imageUrl=t.author.image_url,this.displayName=t.author.display_name,this.url=""+BASE_URL+USERS_PATH+"/"+i},User=function t(e){_classCallCheck(this,t),this.__class__="User";var i=e.id;this.description=e.description,this.imageUrl=e.image_url,this.displayName=e.display_name,this.companyName=e.positions[0].company_name,this.title=e.positions[0].title,this.url=""+BASE_URL+TOPICS_PATH+"/"+i};corsRequest=function(e,t){var i=void 0,n=void 0;if(i="get",n=new XMLHttpRequest,"withCredentials"in n)n.open(i,e,!0);else{if("undefined"==typeof XDomainRequest)throw"Failed to initialize CORSRequest";n=new XDomainRequest,n.open(i,e)}return n.onload=function(e){var e=void 0;if(e=JSON.parse(n.response),n.status<200||300<=n.status)throw e.error;return t(e)},n.send()},getElementsByClassName=function(e,t,i){var n=void 0,s=void 0,a=void 0,o=void 0,d=void 0,r=void 0,l=void 0;for(n="*"===t&&e.all?e.all:e.getElementsByTagName(t),s=[],i=i.replace(/\-/g,"\\-"),r=new RegExp("(^|\\s)"+i+"(\\s|$)"),a=o=0,l=n.length;l>=0?l>=o:o>=l;a=l>=0?++o:--o)d=n[a],d&&r.test(d.className)&&s.push(d);return s},addOnloadHandler=function(e){return window.addEventListener?window.addEventListener("load",e,!1):window.attachEvent?window.attachEvent("onload",e):void 0},setIframeHeight=function(e){var t=void 0;return e&&(t=e.contentWindow||e.contentDocument.parentWindow,t.document.body)?e.height=t.document.documentElement.scrollHeight||t.document.body.scrollHeight:void 0},setInnerText=function(e,t){return"undefined"!=typeof e.textContent?e.textContent=t:e.innerText=t},template='\n<!DOCTYPE html>\n<html lang="ja">\n<head>\n<meta charset="utf-8" />\n<style type="text/css">\n<!--%css%-->\n</style>\n</head>\n<body>\n\n<div id="carousel" class="carousel slide carousel-fade">\n  <ol id="indicators" class="carousel-indicators"></ol>\n  <!-- Carousel items -->\n  <div class="items carousel-inner" id="items"></div>\n  <!-- Carousel nav -->\n  <a class="carousel-control left" href="#carousel" data-slide="prev">&lsaquo;</a>\n  <a class="carousel-control right" href="#carousel" data-slide="next">&rsaquo;</a>\n</div>\n\n</body>\n<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>\n<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>\n<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">\n</html>\n',(main=function(){var e=void 0;return e=getElementsByClassName(document,"a","visasq-cards"),addOnloadHandler(function(){var t=void 0,i=void 0,n=void 0,s=void 0,a=void 0,o=void 0,d=void 0,r=void 0;return o=[],e.forEach(function(e){r=e.getAttribute("data-visasq-username"),d=e.getAttribute("data-visasq-userid"),i=document.createElement("iframe"),i.style.display="none",i.setAttribute("frameBorder","0"),i.style.width="100%",e.parentNode.appendChild(i),e.style.display="none",t=frames[frames.length-1].document,t.open(),t.write(template),t.close(),a=t.getElementById("items"),s=t.getElementById("indicators"),n=new ItemRepository,o.push(n.load(d,r,function(e){var t=void 0,n=void 0,s=void 0,o=void 0;e.forEach(function(e){if(t=document.createElement("div"),n=document.createElement("div"),n.setAttribute("class","card--header"),t.appendChild(n),s=document.createElement("div"),s.setAttribute("class","icon-logo"),t.appendChild(s),o=document.createElement("div"),o.setAttribute("class","info"),t.appendChild(o),"User"===e.__class__){t.setAttribute("class","item active card--user--widget");var i=e.imageUrl,d=void 0,r=void 0,l=void 0,c=void 0,u=void 0,m=void 0,p=void 0,v=void 0,h=void 0;d=document.createElement("div"),d.setAttribute("class","user-img--s"),d.setAttribute("style",'background-image:url("'+i+'")'),o.appendChild(d),r=document.createElement("div"),r.setAttribute("class","text"),o.appendChild(r),l=document.createElement("h4"),setInnerText(l,e.displayName),l.setAttribute("class","title"),r.appendChild(l),c=document.createElement("p"),c.setAttribute("class","job"),r.appendChild(c),u=document.createElement("span"),setInnerText(u,e.companyName),c.appendChild(u),m=document.createElement("span"),setInnerText(m,e.title),c.appendChild(m),p=document.createElement("p"),setInnerText(p,e.description),r.setAttribute("class","descript"),r.appendChild(p),v=document.createElement("div"),v.setAttribute("class","end"),t.appendChild(v),h=document.createElement("a"),h.setAttribute("class","button_blue"),setInnerText(h,"ビザスクで相談"),v.appendChild(h)}else if("Topic"===e.__class__){var i=e.imageUrl,r=void 0,m=void 0,p=void 0,f=void 0,C=void 0,b=void 0,E=void 0,A=void 0,_=void 0,g=void 0,d=void 0,y=void 0,v=void 0,h=void 0;t.setAttribute("class","item card--topic--widget"),r=document.createElement("div"),r.setAttribute("class","text"),o.appendChild(r),m=document.createElement("h4"),setInnerText(m,e.title),r.setAttribute("class","title"),r.appendChild(m),p=document.createElement("p"),setInnerText(p,e.description),r.setAttribute("class","descript"),r.appendChild(p),f=document.createElement("span"),f.setAttribute("class","price"),o.appendChild(f),C=document.createElement("i"),C.setAttribute("class","icon-money_e"),f.appendChild(C),b=document.createElement("div"),b.setAttribute("class","bottom"),t.appendChild(b),E=document.createElement("div"),E.setAttribute("class","liked"),b.appendChild(E),A=document.createElement("div"),A.setAttribute("class","fa fa-star"),E.appendChild(A),_=document.createElement("div"),_.setAttribute("class","like_count"),E.appendChild(_),g=document.createElement("div"),g.setAttribute("class","divider user"),b.appendChild(g),d=document.createElement("div"),d.setAttribute("class","user-img--s"),d.setAttribute("style",'background-image:url("'+i+'")'),o.appendChild(d),y=document.createElement("div"),setInnerText(y,e.displayName),y.setAttribute("class","name"),t.appendChild(y),v=document.createElement("div"),v.setAttribute("class","end"),t.appendChild(v),h=document.createElement("a"),h.setAttribute("class","button_blue"),setInnerText(h,"ビザスクで相談"),v.appendChild(h)}a.appendChild(t)}),i.style.display="block",setIframeHeight(i),setTimeout(function(){$(".carousel").carousel({interval:2e3})},2e3)}))}),o})})();
//# sourceMappingURL=script.js.map