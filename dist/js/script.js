"use strict";var _createClass=function(){function e(e,t){for(var i in t){var s=t[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(e,t)}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},addOnloadHandler=void 0,corsRequest=void 0,getElementsByClassName=void 0,main=void 0,setIframeHeight=void 0,setInnerText=void 0,template=void 0,BASE_URL="https://service.visasq.com/",TOPICS_PATH="topics",USERS_PATH="users",API_PATH="api/v3/",CSS_PATH="https://rawgithub.com/visasq/visasq-widget/master/dist/css/styles.css",LIB_PATH="https://rawgithub.com/visasq/visasq-widget/master/dist/js/lib.js";template='\n<!DOCTYPE html>\n<html lang="ja">\n<head>\n<meta charset="utf-8" />\n<link rel="stylesheet" href="'+CSS_PATH+'">\n<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">\n<script src="'+LIB_PATH+'"></script>\n<style type="text/css">\n<!--%css%-->\n</style>\n</head>\n<body>\n\n<div class="card--widget">\n  <div class="card--header">\n    <a class="carousel-control left" href="#carousel" data-slide="prev"><i class="fa fa-angle-left"></i></a>\n    <a href="https://service.visasq.com/" target="_blank"><img src="https://rawgithub.com/visasq/visasq-widget/master/assets/img/logo.png" /></a>\n    <a class="carousel-control right" href="#carousel" data-slide="next"><i class="fa fa-angle-right"></i></a>\n  </div>\n  <div id="carousel" class="carousel slide carousel-fade">\n    <ol id="indicators" class="carousel-indicators"></ol>\n    <!-- Carousel items -->\n    <div class="items carousel-inner" id="items"></div>\n  </div>\n</div>\n\n</body>\n</html>\n';var ItemRepository=function(){function e(){_classCallCheck(this,e),this.itemContainer={}}return _createClass(e,{load:{value:function(e,t,i){var s=this;return t in this.itemContainer?void i(this.itemContainer[t]):corsRequest(""+BASE_URL+API_PATH+USERS_PATH+"/"+e,function(n){return s.itemContainer[t]=[],s.itemContainer[t].push(new User(n.result)),corsRequest(""+BASE_URL+API_PATH+USERS_PATH+"/"+e+"/"+TOPICS_PATH,function(e){return e.forEach(function(e){s.itemContainer[t].push(new Topic(e))}),i(s.itemContainer[t])})})}}}),e}(),Topic=function e(t){_classCallCheck(this,e),this.__class__="Topic";var i=t.id;this.title=t.title,this.description=t.description,this.blankPrice=t.blank_price,this.price=t.price,this.likes=t.likes,this.imageUrl=t.author.image_url,this.displayName=t.author.display_name,this.url=""+BASE_URL+TOPICS_PATH+"/"+i},User=function t(e){_classCallCheck(this,t),this.__class__="User";var i=e.id;this.description=e.description,this.imageUrl=e.image_url,this.displayName=e.display_name,this.companyName=e.positions[0].company_name,this.title=e.positions[0].title,this.url=""+BASE_URL+USERS_PATH+"/"+i};corsRequest=function(e,t){var i=void 0,s=void 0;if(i="get",s=new XMLHttpRequest,"withCredentials"in s)s.open(i,e,!0);else{if("undefined"==typeof XDomainRequest)throw"Failed to initialize CORSRequest";s=new XDomainRequest,s.open(i,e)}return s.onload=function(e){var e=void 0;if(e=JSON.parse(s.response),s.status<200||300<=s.status)throw e.error;return t(e)},s.send()},getElementsByClassName=function(e,t,i){var s=void 0,n=void 0,a=void 0,r=void 0,d=void 0,o=void 0,l=void 0;for(s="*"===t&&e.all?e.all:e.getElementsByTagName(t),n=[],i=i.replace(/\-/g,"\\-"),o=new RegExp("(^|\\s)"+i+"(\\s|$)"),a=r=0,l=s.length;l>=0?l>=r:r>=l;a=l>=0?++r:--r)d=s[a],d&&o.test(d.className)&&n.push(d);return n},addOnloadHandler=function(e){return window.addEventListener?window.addEventListener("load",e,!1):window.attachEvent?window.attachEvent("onload",e):void 0},setIframeHeight=function(e){var t=void 0;return e&&(t=e.contentWindow||e.contentDocument.parentWindow,t.document.body)?e.height=t.document.documentElement.scrollHeight||t.document.body.scrollHeight:void 0},setInnerText=function(e,t){return"undefined"!=typeof e.textContent?e.textContent=t:e.innerText=t},(main=function(){var e=void 0;return e=getElementsByClassName(document,"a","visasq-cards"),addOnloadHandler(function(){var t=void 0,i=void 0,s=void 0,n=void 0,a=void 0,r=void 0,d=void 0;return a=[],e.forEach(function(e){d=e.getAttribute("data-visasq-username"),r=e.getAttribute("data-visasq-userid"),i=document.createElement("iframe"),i.style.display="none",i.setAttribute("frameBorder","0"),i.style.width="100%",e.parentNode.appendChild(i),e.style.display="none",t=frames[frames.length-1].document,t.open(),t.write(template),t.close(),n=t.getElementById("items"),s=new ItemRepository,a.push(s.load(r,d,function(e){var t=void 0,s=void 0,a=void 0;e.forEach(function(e){if(t=document.createElement("a"),t.setAttribute("target","_blank"),t.setAttribute("href",e.url),n.appendChild(t),s=document.createElement("div"),t.appendChild(s),a=document.createElement("div"),a.setAttribute("class","info"),s.appendChild(a),"User"===e.__class__){t.setAttribute("class","item active card--user--widget");var i=e.imageUrl,r=void 0,d=void 0,o=void 0,l=void 0,c=void 0,u=void 0,m=void 0,p=void 0,v=void 0;r=document.createElement("div"),r.setAttribute("class","user-img--s"),r.setAttribute("style",'background-image:url("'+i+'")'),a.appendChild(r),d=document.createElement("div"),d.setAttribute("class","text"),a.appendChild(d),o=document.createElement("h4"),setInnerText(o,e.displayName),o.setAttribute("class","title"),d.appendChild(o),l=document.createElement("p"),l.setAttribute("class","job"),d.appendChild(l),c=document.createElement("span"),setInnerText(c,e.companyName),l.appendChild(c),u=document.createElement("span"),setInnerText(u,e.title),l.appendChild(u),m=document.createElement("p"),setInnerText(m,e.description),m.setAttribute("class","descript"),d.appendChild(m),p=document.createElement("div"),p.setAttribute("class","end"),s.appendChild(p),v=document.createElement("a"),v.setAttribute("class","button_blue"),setInnerText(v,"ビザスクで相談"),p.appendChild(v)}else if("Topic"===e.__class__){var i=e.imageUrl,d=void 0,u=void 0,m=void 0,h=void 0,f=void 0,b=void 0,C=void 0,g=void 0,A=void 0,E=void 0,r=void 0,_=void 0,p=void 0,v=void 0;t.setAttribute("class","item card--topic--widget"),d=document.createElement("div"),d.setAttribute("class","text"),a.appendChild(d),u=document.createElement("h4"),setInnerText(u,e.title),u.setAttribute("class","title"),d.appendChild(u),m=document.createElement("p"),setInnerText(m,e.description),m.setAttribute("class","descript"),d.appendChild(m),f=document.createElement("img"),f.setAttribute("src","https://rawgithub.com/visasq/visasq-widget/master/assets/img/yen.png"),f.setAttribute("class","price-icon"),a.appendChild(f),h=document.createElement("span"),h.setAttribute("class","price"),e.blankPrice?setInnerText(h,"問い合わせ"):setInnerText(h,e.price+" 〜"),h.setAttribute("class","price"),a.appendChild(h),b=document.createElement("div"),b.setAttribute("class","bottom"),s.appendChild(b),C=document.createElement("div"),C.setAttribute("class","liked"),b.appendChild(C),g=document.createElement("div"),g.setAttribute("class","fa fa-star"),C.appendChild(g),A=document.createElement("div"),A.setAttribute("class","like_count"),setInnerText(A,e.likes),C.appendChild(A),E=document.createElement("div"),E.setAttribute("class","divider user"),b.appendChild(E),r=document.createElement("div"),r.setAttribute("class","user-img--min"),r.setAttribute("style",'background-image:url("'+i+'")'),b.appendChild(r),_=document.createElement("div"),setInnerText(_,e.displayName),_.setAttribute("class","name"),s.appendChild(_),p=document.createElement("div"),p.setAttribute("class","end"),s.appendChild(p),v=document.createElement("a"),v.setAttribute("class","button_blue"),setInnerText(v,"ビザスクで相談"),p.appendChild(v)}}),i.style.display="block",setIframeHeight(i),setTimeout(function(){$(".carousel").carousel({interval:2e3})},2e3)}))}),a})})();
//# sourceMappingURL=script.js.map